{"version":3,"file":"src_modules_contact-form_js.js","mappings":"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","sources":["webpack://venture-outdoors-classic/./src/modules/contact-form.js"],"sourcesContent":["import $ from 'jquery'\r\nimport intlTelInput from \"intl-tel-input\";\r\n\r\n// let iti = null;\r\n\r\nclass ContactForm {\r\n  constructor() {\r\n    var instance = this;\r\n\r\n    this.inpt = document.querySelector(\"#phone\");\r\n    this.iti = intlTelInput(this.inpt, {\r\n        autoPlaceholder: \"off\",\r\n        formatOnDisplay: true,\r\n        utilsScript: ventureoutdoorsData.template_uri + \"/src/intl-tel-input-utils.js\",\r\n    });\r\n    \r\n    $.validator.addMethod( \"intTel\", function( phoneNumber, element, params) {\r\n      return this.optional( element ) || instance.iti.isValidNumber();\r\n    }, \"Please enter a valid phone number.\" )\r\n\r\n    $(\"form[name='contact_form']\").validate({\r\n      rules: {\r\n        first_name: \"required\",\r\n        last_name: \"required\",\r\n        phone: {\r\n          required: true,\r\n          intTel: true\r\n        },\r\n        email: {\r\n          required: true,\r\n          email: true\r\n        },\r\n        description: \"required\"\r\n      },\r\n      submitHandler: function(form) {\r\n        if ($('input#extra').val().length === 0) {\r\n          instance.sendEmail(instance.iti.getNumber());\r\n        }\r\n      },\r\n    });\r\n\r\n    this.events();\r\n  }\r\n\r\n  events() {\r\n    $('#phone').on('keyup', function () {\r\n      if (this.iti.isValidNumber()) {\r\n        $('#phone').val(this.formatPhoneNumber());\r\n      }\r\n    }.bind(this));\r\n  }\r\n\r\n  sendEmail(phoneNumber) {\r\n    jQuery.ajax({\r\n        url: ventureoutdoorsData.template_uri + \"/inc/send-email.php\",\r\n        data: 'firstName=' + $('#first_name').val() + '&lastName=' + $('#last_name').val() + '&phone=' + phoneNumber\r\n            + '&email=' + $('#email').val() + '&message=' + $('#description').val() + '&foundUs=' + $('#found_us option:selected').text() + '&optIn=' + $('#opt_in').val(),\r\n        type: \"POST\",\r\n        success: function (data) {\r\n          if (JSON.parse(data).status === \"success\") {\r\n            var validator = $(\"form[name='contact_form']\").validate();\r\n            validator.resetForm();\r\n            $(\"form[name='contact_form']\")[0].reset();\r\n            $(\".form-success\").removeClass('hidden');\r\n            $(\".form-error\").addClass('hidden');\r\n          } else {\r\n            $(\".form-success\").addClass('hidden');\r\n            $(\".form-error\").removeClass('hidden');\r\n          }\r\n        },\r\n        error: function (jqXHR, textStatus, errorThrown) {\r\n          $(\".form-success\").addClass('hidden');\r\n          $(\".form-error\").removeClass('hidden');\r\n        }\r\n    });\r\n  }\r\n\r\n  formatPhoneNumber() {\r\n    var number = $('#phone').val();\r\n    var classf = $(\".iti__selected-flag > div\").attr(\"class\");\r\n    var flag = classf.slice(-2);\r\n    var formattedNumber = intlTelInputUtils.formatNumber(number, flag, intlTelInputUtils.numberFormat.NATIONAL);\r\n    if (flag !== 'us') {\r\n      formattedNumber = intlTelInputUtils.formatNumber(number, flag, intlTelInputUtils.numberFormat.INTERNATIONAL);\r\n      formattedNumber = formattedNumber.slice(formattedNumber.indexOf(' ') + 1, formattedNumber.length);\r\n    }\r\n    return formattedNumber;\r\n  }\r\n}\r\n\r\nexport default ContactForm;\r\n"],"names":["$","intlTelInput","ContactForm","constructor","instance","inpt","document","querySelector","iti","autoPlaceholder","formatOnDisplay","utilsScript","ventureoutdoorsData","template_uri","validator","addMethod","phoneNumber","element","params","optional","isValidNumber","validate","rules","first_name","last_name","phone","required","intTel","email","description","submitHandler","form","val","length","sendEmail","getNumber","events","on","formatPhoneNumber","bind","jQuery","ajax","url","data","text","type","success","JSON","parse","status","resetForm","reset","removeClass","addClass","error","jqXHR","textStatus","errorThrown","number","classf","attr","flag","slice","formattedNumber","intlTelInputUtils","formatNumber","numberFormat","NATIONAL","INTERNATIONAL","indexOf"],"sourceRoot":""}