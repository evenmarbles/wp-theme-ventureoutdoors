(()=>{var t={41:t=>{var e={},n=-1;t.exports={publish:function(t,n){return!!e[t]&&(e[t].forEach((function(e){e.callback(t,n)})),!0)},subscribe:function(t,i){e[t]||(e[t]=[]);var r=(n+=1).toString();return e[t].push({token:r,callback:i}),r},unsubscribe:function(t){return Object.keys(e).some((function(n){return e[n].some((function(i,r){var o=i.token===t.toString();return o&&e[n].splice(r,1),o}))}))?t:null}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=window.jQuery;var e=n.n(t);function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var r=n(41);const o=function(){function t(){var e,n,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.restUrl=null!==(e=null===(n=siteConfig)||void 0===n?void 0:n.restUrl)&&void 0!==e?e:"",this.ajaxNonce=null!==(i=null===(r=siteConfig)||void 0===r?void 0:r.ajax_nonce)&&void 0!==i?i:"",this.isOptionsProcessing=!1,this.isActivitiesProcessing=!1,this.resetFilterFields(),this.events(),this.init()}var n,o,c;return n=t,(o=[{key:"resetFilterFields",value:function(){this.filterFields={type:[],length:[],difficulty:[]}}},{key:"events",value:function(){throw new Error("Implementation required.")}},{key:"init",value:function(){throw new Error("Implementation required")}},{key:"addSpinner",value:function(){}},{key:"removeSpinner",value:function(){}},{key:"getData",value:function(){var t={};for(var e in this.filterFields)0!==this.filterFields[e].length&&(t[e]=this.filterFields[e]);return t}},{key:"filterActivities",value:function(t){var n=this;if(this.isOptionsProcessing||this.isActivitiesProcessing)return null;var i=this.getData();return i._wpnonce=this.ajaxNonce,this.isOptionsProcessing=!0,this.isActivitiesProcessing=!0,this.addSpinner(),e().ajax({type:"get",url:this.restUrl+"filter",data:i,success:function(e){t(e),n.isOptionsProcessing=!1,n.removeSpinner()},error:function(t){console.log(t),n.isOptionsProcessing=!1,n.removeSpinner()}}),e().ajax({type:"get",url:this.restUrl+"activities",data:i,success:function(t){e()(".load-more-content-wrap").html(t.innerHTML),r.publish("activitiesUpdated",{count:t.postCount}),n.isActivitiesProcessing=!1,n.removeSpinner()},error:function(t){console.log(t),n.isActivitiesProcessing=!1,n.removeSpinner()}})}}])&&i(n.prototype,o),c&&i(n,c),Object.defineProperty(n,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=f(t);if(e){var r=f(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return l(this,n)}}function l(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}var p=n(41),v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(c,t);var n,i,r,o=u(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this)).numberResults=e()(".js-number-results"),t}return n=c,i=[{key:"events",value:function(){e()(".facetwp-facet").on("change",this.optionChanged.bind(this)),e()(".js-frontpage-filter").on("click",this.redirect.bind(this))}},{key:"init",value:function(){p.subscribe("activitiesUpdated",this.updateResults.bind(this))}},{key:"updateResults",value:function(t,e){this.numberResults.text(e.count.toString())}},{key:"capitalize",value:function(t){var n=t.split("_");return e().each(n,(function(t,e){n[t]=e[0].toUpperCase()+e.substring(1)})),n.join(" ")}},{key:"updateBannerFilter",value:function(t){e()(".facetwp-facet").each(function(n,i){var r=e()(i).data("name");r=r.substring(r.indexOf("_")+1);var o=e()("#".concat(r)).prop("selectedIndex");e()("#".concat(r)).empty();var c=r.substring(r.indexOf("_")+1);(void 0===this.filter||this.filter!==r||this.filter===r&&""==e()(i).val())&&(e()("#".concat(r)).append('<option value="">'.concat(this.capitalize(r),"</option>")),e().each(t[c],function(t,n){if(0!==n.count||r===this.filter){var i=n.title,o=n.slug;"difficulty"===r&&(i=i.substr(0,i.length-1)+" "+i.substr(-1)),e()("#".concat(r)).append('<option value="'.concat(o,'">').concat(i," (").concat(n.count,")</option>"))}}.bind(this)),e()("#".concat(r)).selectric("refresh"),e()("#".concat(r)).prop("selectedIndex",o).selectric("refresh"))}.bind(this))}},{key:"optionChanged",value:function(t){this.filter=e()(t.currentTarget).data("name"),this.filter=this.filter.substring(this.filter.indexOf("_")+1);var n=e()(".facetwp-facet-frontpage_activity_type select option:selected").val(),i=e()(".facetwp-facet-frontpage_activity_length select").val(),r=e()(".facetwp-facet-frontpage_difficulty_level select").val();this.resetFilterFields(),n&&this.filterFields.type.push(n),i&&this.filterFields.length.push(i),r&&this.filterFields.difficulty.push(r),this.filterActivities(this.updateBannerFilter.bind(this))}},{key:"redirect",value:function(){var t=[],n="/activity-types",i=e()(".facetwp-facet-frontpage_activity_type select").val(),r=e()(".facetwp-facet-frontpage_activity_length select").val(),o=e()(".facetwp-facet-frontpage_difficulty_level select").val();""===i||null==i?n="/activities":n+="/"+i,""!==r&&null!=r&&t.push("fvo_length="+encodeURIComponent(r)),""!==o&&null!=o&&t.push("fvo_difficulty="+encodeURIComponent(o)),t.length>0&&(n+="?"+t.join("&")),window.location=n}}],i&&s(n.prototype,i),r&&s(n,r),Object.defineProperty(n,"prototype",{writable:!1}),c}(o);new v})()})();
//# sourceMappingURL=page.js.map